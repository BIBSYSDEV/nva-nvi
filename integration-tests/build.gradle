plugins {
    id "nva.nvi.java-conventions"
}

dependencies {
    testImplementation libs.aws.sdk2.sns
    testImplementation libs.aws.sdk2.sqs
    testImplementation nvaCatalog.assertj.core
    testImplementation nvaCatalog.aws.lambda.core
    testImplementation nvaCatalog.aws.lambda.events
    testImplementation nvaCatalog.aws.sdk2.dynamo
    testImplementation nvaCatalog.bundles.testing.cucumber
    testImplementation nvaCatalog.bundles.testing.junit
    testImplementation nvaCatalog.mockito.core
    testImplementation nvaLibs.auth
    testImplementation nvaLibs.core
    testImplementation nvaLibs.testutils
    testImplementation project(":event-handlers")
    testImplementation project(":nvi-commons")
    testImplementation project(":nvi-test")
    testImplementation(testFixtures(project(":event-handlers")))
    testImplementation(testFixtures(project(":nvi-commons")))
  testImplementation nvaCatalog.jackson.core
  testImplementation 'io.cucumber:cucumber-core:7.21.1'
  testImplementation nvaCatalog.jackson.databind
  testImplementation 'org.junit.platform:junit-platform-suite-api:1.13.3'
}

test {
    environment("API_HOST", "api.fake.nva.aws.unit.no")
    environment("BACKEND_CLIENT_AUTH_URL", "api.fake.nva.aws.unit.no/auth")
    environment("CANDIDATE_DLQ_URL", "http://localhost:3000/candidate-DLQ")
    environment("CANDIDATE_QUEUE_URL", "http://localhost:3000/candidate-queue")
    environment("COGNITO_AUTHORIZER_URLS", "http://localhost:3000")
    environment("CUSTOM_DOMAIN_BASE_PATH", "scientific-index")
    environment("EXPANDED_RESOURCES_BUCKET", "testBucket")
    environment("LOG_LEVEL", "debug")
    environment("NVI_TABLE_NAME", "some-table")
    environment("UPSERT_CANDIDATE_DLQ_QUEUE_URL", "http://localhost:3000/upsert-candidate-DLQ")
}
