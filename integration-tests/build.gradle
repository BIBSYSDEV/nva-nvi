plugins {
    id "nva.nvi.java-conventions"
}

dependencies {
    testImplementation nvaCatalog.aws.java.sdk.core
    testImplementation nvaCatalog.aws.lambda.core
    testImplementation nvaCatalog.aws.lambda.events
    testImplementation nvaCatalog.aws.sdk2.core
    testImplementation nvaCatalog.aws.sdk2.dynamo
    testImplementation nvaCatalog.aws.sdk2.s3
    testImplementation libs.aws.sdk2.sns
    testImplementation libs.aws.sdk2.sqs
    testImplementation libs.bundles.cucumber
    testImplementation libs.bundles.testing
    testImplementation libs.com.auth0.jwt
    testImplementation libs.nva.commons.auth
    testImplementation libs.nva.commons.core
    testImplementation libs.nva.json
    testImplementation libs.nva.s3
    testImplementation libs.nva.testutils

    testImplementation project(":event-handlers")
    testImplementation project(":index-handlers")
    testImplementation project(":nvi-commons")
    testImplementation project(":nvi-rest")
    testImplementation project(":nvi-test")
    testImplementation(testFixtures(project(":event-handlers")))
    testImplementation(testFixtures(project(":nvi-commons")))
}

test {
    environment("API_HOST", "api.fake.nva.aws.unit.no")
    environment("BACKEND_CLIENT_AUTH_URL", "api.fake.nva.aws.unit.no/auth")
    environment("CANDIDATE_DLQ_URL", "http://localhost:3000/candidate-DLQ")
    environment("CANDIDATE_QUEUE_URL", "http://localhost:3000/candidate-queue")
    environment("COGNITO_AUTHORIZER_URLS", "http://localhost:3000")
    environment("CUSTOM_DOMAIN_BASE_PATH", "scientific-index")
    environment("EXPANDED_RESOURCES_BUCKET", "testBucket")
    environment("LOG_LEVEL", "debug")
    environment("NVI_TABLE_NAME", "some-table")
    environment("UPSERT_CANDIDATE_DLQ_QUEUE_URL", "http://localhost:3000/upsert-candidate-DLQ")
}
