plugins {
    id 'nva.nvi.java-conventions'
}
dependencies {
    testImplementation libs.aws.sdk2.sqs
    implementation libs.nva.language
    runtimeOnly nvaCatalog.aws.apache.client
    implementation nvaCatalog.aws.java.sdk.core
    api nvaCatalog.aws.lambda.core
    api nvaCatalog.aws.lambda.events
    implementation nvaCatalog.aws.sdk2.dynamo
    api nvaCatalog.aws.sdk2.s3
    implementation nvaCatalog.bundles.apache.poi
    implementation nvaCatalog.bundles.jacksonjr
    implementation nvaCatalog.bundles.logging
    api nvaCatalog.com.auth0.jwt
    api nvaCatalog.guava
    api nvaCatalog.jackson.core
    api nvaCatalog.jackson.databind
    implementation nvaCatalog.jena.core
    api nvaCatalog.opensearch.java
    api nvaCatalog.opensearch.rest.client
    api nvaLibs.apigateway
    api nvaLibs.auth
    api nvaLibs.clients
    api nvaLibs.core
    api nvaLibs.json
    api nvaLibs.pagination
    implementation nvaLibs.s3
    implementation nvaLibs.secrets
    api project(':nvi-commons')
    testImplementation nvaCatalog.assertj.core
    testImplementation nvaCatalog.bundles.testing.cucumber
    testImplementation nvaCatalog.bundles.testing.junit
    testImplementation nvaCatalog.bundles.testing.testcontainers
    testImplementation nvaCatalog.hamcrest
    testImplementation nvaCatalog.mockito.core
    testImplementation nvaCatalog.zalando
    testImplementation nvaLibs.identifiers
    testImplementation nvaLibs.logutils
    testImplementation nvaLibs.testutils
    testImplementation project(':nvi-test')
    testImplementation(testFixtures(project(":nvi-commons")))
  api nvaCatalog.jackson.annotations
  implementation 'org.apache.httpcomponents.core5:httpcore5:5.3.4'
  testImplementation 'org.apache.httpcomponents:httpcore:4.4.16'
  testImplementation 'software.amazon.awssdk:aws-core:2.31.78'
  implementation 'jakarta.json:jakarta.json-api:2.1.3'
  testImplementation nvaCatalog.hamcrest.core
  testImplementation 'org.apache.httpcomponents.core5:httpcore5:5.3.4'
  testImplementation 'org.picocontainer:picocontainer:2.15'
}

test {
    useJUnitPlatform()
    environment("EXPANDED_RESOURCES_BUCKET", "persisted-resources")
    environment("SEARCH_INFRASTRUCTURE_API_HOST", "localhost")
    environment("SEARCH_INFRASTRUCTURE_AUTH_URI", "localhost")
    environment("SEARCH_INFRASTRUCTURE_API_URI", "localhost")
    environment("NVI_TABLE_NAME", "some-table")
    environment("ALLOWED_ORIGIN", "*")
    environment("API_HOST", "api.fake.nva.aws.unit.no")
    environment("CUSTOM_DOMAIN_BASE_PATH", "scientific-index")
    environment("BACKEND_CLIENT_AUTH_URL", "My url")
    environment("BACKEND_CLIENT_SECRET_NAME", "My secret name")
    environment("PERSISTED_INDEX_DOCUMENT_QUEUE_URL", "PersistedIndexDocumentQueue")
    environment("INDEX_DLQ", "IndexDlq")
    environment("INSTITUTION_REPORT_SEARCH_PAGE_SIZE", "4")
    environment("COGNITO_AUTHORIZER_URLS", "http://localhost:3000")
    environment("LOG_LEVEL", "trace")
}
